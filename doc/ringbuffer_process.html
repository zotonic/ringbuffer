<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.35.1">
    <meta name="project" content="ringbuffer v1.2.0+build.18.refca920a0">


    <title>ringbuffer_process â€” ringbuffer v1.2.0+build.18.refca920a0</title>
    <link rel="stylesheet" href="dist/html-erlang-4IXSOGMD.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-C002F7F1.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-PVRIOB7F.js"></script>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
ringbuffer
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.2.0+build.18.refca920a0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ringbuffer</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L20" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">ringbuffer_process</span> 
    <small class="app-vsn" translate="no">(ringbuffer v1.2.0+build.18.refca920a0)</small>

  </h1>


    <section id="moduledoc">
<p>Process to own the created ets table for the ring buffer.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#code_change/3" data-no-tooltip translate="no">code_change(OldVsn, State, Extra)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#handle_call/3" data-no-tooltip translate="no">handle_call(_, From, State)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#handle_cast/2" data-no-tooltip translate="no">handle_cast(Msg, State)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#handle_info/2" data-no-tooltip translate="no">handle_info(Info, State)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#init/1" data-no-tooltip translate="no">init(_)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#process_pid/1" data-no-tooltip translate="no">process_pid(Name)</a>

      </div>

        <div class="summary-synopsis"><p>Find the process pid for the process owning the ets table. If the buffer does not exist then an error is returned.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#read/1" data-no-tooltip translate="no">read(Name)</a>

      </div>

        <div class="summary-synopsis"><p>Read a payload from the buffer. Skip entries that are deleted by the writers.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_link/2" data-no-tooltip translate="no">start_link(Name, Size)</a>

      </div>

        <div class="summary-synopsis"><p>Create a new process managing a ringbuffer.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#terminate/2" data-no-tooltip translate="no">terminate(Reason, State)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#write/2" data-no-tooltip translate="no">write(Name, Payload)</a>

      </div>

        <div class="summary-synopsis"><p>Write a payload the buffer. If the readers can't keep up then older entries are deleted.</p></div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="code_change/3">

  <div class="detail-header">
    <a href="#code_change/3" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">code_change(OldVsn, State, Extra)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L215" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="handle_call/3">

  <div class="detail-header">
    <a href="#handle_call/3" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">handle_call(_, From, State)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L187" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="handle_cast/2">

  <div class="detail-header">
    <a href="#handle_cast/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">handle_cast(Msg, State)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L203" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="handle_info/2">

  <div class="detail-header">
    <a href="#handle_info/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">handle_info(Info, State)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L206" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="init/1">

  <div class="detail-header">
    <a href="#init/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">init(_)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L172" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="process_pid/1">

  <div class="detail-header">
    <a href="#process_pid/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">process_pid(Name)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L65" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> process_pid(Name :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:atom/0">atom</a>()) -> {ok, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:pid/0">pid</a>()} | {error, badarg}.</pre>

      </div>

<p>Find the process pid for the process owning the ets table. If the buffer does not exist then an error is returned.</p>
  </section>
</section>
<section class="detail" id="read/1">

  <div class="detail-header">
    <a href="#read/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">read(Name)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L105" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> read(Name :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:atom/0">atom</a>()) -> {ok, {Skipped :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>(), Payload :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}} | {error, empty}.</pre>

      </div>

<p>Read a payload from the buffer. Skip entries that are deleted by the writers.</p><p>There are a coupe of race conditions we need to take care of:</p><p>1. Writer incremented -&gt; Reader tries entry --&gt; Writer writes entry In this case the w-value read by the reader is Size smaller than that of the writer. In this case we wait till the writer finishes writing.</p><p>2. Two or more readers arrive at the same time, incrementing the reader value. One of the readers will have the correct value and can fetch the next entry. In this case the reader can move past the writer if there are not enough entries in the buffer for all readers.</p><p>For the case where multiple readers are racing past the writer can not be solved without synchronization, we let the ringbuffer process handle the reader increment.</p>
  </section>
</section>
<section class="detail" id="start_link/2">

  <div class="detail-header">
    <a href="#start_link/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">start_link(Name, Size)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L58" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start_link(<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:atom/0">atom</a>(), <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>()) -> {ok, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:pid/0">pid</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Create a new process managing a ringbuffer.</p>
  </section>
</section>
<section class="detail" id="terminate/2">

  <div class="detail-header">
    <a href="#terminate/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">terminate(Reason, State)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L212" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="write/2">

  <div class="detail-header">
    <a href="#write/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">write(Name, Payload)</h1>

      <a href="https://github.com/zotonic/ringbuffer/blob/v1.2.0+build.18.refca920a0/src/ringbuffer_process.erl#L77" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> write(Name :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:atom/0">atom</a>(), Payload :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()) -> ok.</pre>

      </div>

<p>Write a payload the buffer. If the readers can't keep up then older entries are deleted.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/ringbuffer/1.2.0+build.18.refca920a0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/ringbuffer/1.2.0+build.18.refca920a0">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ringbuffer.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.35.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
